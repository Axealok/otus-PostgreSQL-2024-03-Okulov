# Работа с индексами

##    Создать индекс к какой-либо из таблиц вашей БД

Создаем таблицу для теста

```
postgres=# CREATE TABLE index_test_table(
random_num INTEGER,
random_text TEXT,
bool_field BOOLEAN
);
CREATE TABLE
postgres=# INSERT INTO index_test_table(random_num, random_text, bool_field)
SELECT
s.id,
chr((32 + random() * 94)::INTEGER),
random() < 0.01
FROM generate_series(1, 100000) AS s(id)
ORDER BY random();
INSERT 0 100000

```
Создание индекса

```
postgres=# CREATE INDEX ON index_test_table(random_num);
CREATE INDEX
postgres=# ANALYZE index_test_table;
ANALYZE
postgres=# EXPLAIN SELECT * FROM index_test_table WHERE random_num = 1;
                                               QUERY PLAN                                               
--------------------------------------------------------------------------------------------------------
 Index Scan using index_test_table_random_num_idx on index_test_table  (cost=0.29..8.31 rows=1 width=7)
   Index Cond: (random_num = 1)
(2 rows)

postgres=# EXPLAIN SELECT * FROM index_test_table WHERE random_num < 100;
                                           QUERY PLAN                                           
------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on index_test_table  (cost=5.16..264.03 rows=112 width=7)
   Recheck Cond: (random_num < 100)
   ->  Bitmap Index Scan on index_test_table_random_num_idx  (cost=0.00..5.13 rows=112 width=0)
         Index Cond: (random_num < 100)
(4 rows)

postgres=# CREATE INDEX ON index_test_table(random_text);
CREATE INDEX
postgres=# EXPLAIN SELECT * FROM index_test_table WHERE random_num <= 100 AND
random_text = 'a';
                                               QUERY PLAN                                               
--------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on index_test_table  (cost=17.13..21.15 rows=1 width=7)
   Recheck Cond: ((random_num <= 100) AND (random_text = 'a'::text))
   ->  BitmapAnd  (cost=17.13..17.13 rows=1 width=0)
         ->  Bitmap Index Scan on index_test_table_random_num_idx  (cost=0.00..5.14 rows=113 width=0)
               Index Cond: (random_num <= 100)
         ->  Bitmap Index Scan on index_test_table_random_text_idx  (cost=0.00..11.74 rows=993 width=0)
               Index Cond: (random_text = 'a'::text)
(7 rows)

```

    Реализовать индекс для полнотекстового поиска

```

postgres=# CREATE TABLE articles (
id SERIAL PRIMARY KEY,
title TEXT,
content TEXT
);
CREATE TABLE
postgres=# INSERT INTO articles (title, content) VALUES
('PostgreSQL Tutorial', 'This tutorial covers the basics of PostgreSQL.'),
('Full-Text Search in PostgreSQL', 'Learn how to use full-text search in
PostgreSQL.'),
('Advanced PostgreSQL Features', 'Explore advanced features of PostgreSQL,
including GIN indexes and full-text search.');
INSERT 0 3
postgres=# ALTER TABLE articles ADD COLUMN content_tsvector TSVECTOR GENERATED ALWAYS
AS (to_tsvector('english', content)) STORED;
ALTER TABLE
postgres=# SELECT * FROM articles;
 id |             title              |                    content                     |                                                      content_tsvector                                                       
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  1 | PostgreSQL Tutorial            | This tutorial covers the basics of PostgreSQL. | 'basic':5 'cover':3 'postgresql':7 'tutori':2
  2 | Full-Text Search in PostgreSQL | Learn how to use full-text search in          +| 'full':6 'full-text':5 'learn':1 'postgresql':10 'search':8 'text':7 'use':4
    |                                | PostgreSQL.                                    | 
  3 | Advanced PostgreSQL Features   | Explore advanced features of PostgreSQL,      +| 'advanc':2 'explor':1 'featur':3 'full':11 'full-text':10 'gin':7 'includ':6 'index':8 'postgresql':5 'search':13 'text':12
    |                                | including GIN indexes and full-text search.    | 
(3 rows)

```

```

    Реализовать индекс на часть таблицы или индекс
    на поле с функцией
    Создать индекс на несколько полей
    Написать комментарии к каждому из индексов
    Описать что и как делали и с какими проблемами
    столкнулись
